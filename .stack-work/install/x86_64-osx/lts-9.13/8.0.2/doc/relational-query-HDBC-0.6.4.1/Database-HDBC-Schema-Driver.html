<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Database.HDBC.Schema.Driver</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();setSynopsis("mini_Database-HDBC-Schema-Driver.html");};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Database.HDBC.Schema.Driver.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">relational-query-HDBC-0.6.4.1: HDBC instance of relational-query and typed query interface for HDBC</p></div><div id="content"><div id="module-header"><table class="info"><tr><th valign="top">Copyright</th><td>2013 Kei Hibino</td></tr><tr><th>License</th><td>BSD3</td></tr><tr><th>Maintainer</th><td>ex8k.hibino@gmail.com</td></tr><tr><th>Stability</th><td>experimental</td></tr><tr><th>Portability</th><td>unknown</td></tr><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell2010</td></tr></table><p class="caption">Database.HDBC.Schema.Driver</p></div><div id="description"><p class="caption">Description</p><div class="doc"><p>This module provides driver interface
 to load database system catalog via HDBC.</p></div></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">type</span> <a href="#t:TypeMap">TypeMap</a> = [(<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, <a href="../template-haskell-2.11.1.0/Language-Haskell-TH-Lib.html#t:TypeQ">TypeQ</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Log">Log</a></li><li class="src short"><a href="#v:runLog">runLog</a> :: (<a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; t) -&gt; (<a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; t) -&gt; <a href="Database-HDBC-Schema-Driver.html#t:Log">Log</a> -&gt; t</li><li class="src short"><span class="keyword">data</span> <a href="#t:LogChan">LogChan</a></li><li class="src short"><a href="#v:newLogChan">newLogChan</a> :: <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a></li><li class="src short"><a href="#v:takeLogs">takeLogs</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> [<a href="Database-HDBC-Schema-Driver.html#t:Log">Log</a>]</li><li class="src short"><a href="#v:putWarning">putWarning</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:putError">putError</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:putVerbose">putVerbose</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:failWith">failWith</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a> <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:hoistMaybe">hoistMaybe</a> :: <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a> m a</li><li class="src short"><a href="#v:maybeIO">maybeIO</a> :: b -&gt; (a -&gt; b) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a> <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> b</li><li class="src short"><span class="keyword">data</span> <a href="#t:Driver">Driver</a> conn = <a href="#v:Driver">Driver</a> {<ul class="subs"><li><a href="#v:typeMap">typeMap</a> :: <a href="Database-HDBC-Schema-Driver.html#t:TypeMap">TypeMap</a></li><li><a href="#v:getFieldsWithMap">getFieldsWithMap</a> :: <a href="Database-HDBC-Schema-Driver.html#t:TypeMap">TypeMap</a> -&gt; conn -&gt; <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ([(<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, <a href="../template-haskell-2.11.1.0/Language-Haskell-TH-Lib.html#t:TypeQ">TypeQ</a>)], [<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a>])</li><li><a href="#v:getPrimaryKey">getPrimaryKey</a> :: conn -&gt; <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>]</li></ul>}</li><li class="src short"><a href="#v:emptyDriver">emptyDriver</a> :: <a href="../HDBC-2.4.0.2/Database-HDBC-Types.html#t:IConnection">IConnection</a> conn =&gt; <a href="Database-HDBC-Schema-Driver.html#t:Driver">Driver</a> conn</li><li class="src short"><a href="#v:getFields">getFields</a> :: <a href="../HDBC-2.4.0.2/Database-HDBC-Types.html#t:IConnection">IConnection</a> conn =&gt; <a href="Database-HDBC-Schema-Driver.html#t:Driver">Driver</a> conn -&gt; conn -&gt; <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ([(<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, <a href="../template-haskell-2.11.1.0/Language-Haskell-TH-Lib.html#t:TypeQ">TypeQ</a>)], [<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a>])</li></ul></div><div id="interface"><h1>Documentation</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:TypeMap" class="def">TypeMap</a> = [(<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, <a href="../template-haskell-2.11.1.0/Language-Haskell-TH-Lib.html#t:TypeQ">TypeQ</a>)] <a href="src/Database.HDBC.Schema.Driver.html#TypeMap" class="link">Source</a> <a href="#t:TypeMap" class="selflink">#</a></p><div class="doc"><p>Mapping between type name string of DBMS and type in Haskell.
   Type name string depends on specification of DBMS system catalogs.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Log" class="def">Log</a> <a href="src/Database.HDBC.Schema.Driver.html#Log" class="link">Source</a> <a href="#t:Log" class="selflink">#</a></p><div class="doc"><p>Log string type for compile time.</p></div></div><div class="top"><p class="src"><a id="v:runLog" class="def">runLog</a> :: (<a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; t) -&gt; (<a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; t) -&gt; <a href="Database-HDBC-Schema-Driver.html#t:Log">Log</a> -&gt; t <a href="src/Database.HDBC.Schema.Driver.html#runLog" class="link">Source</a> <a href="#v:runLog" class="selflink">#</a></p><div class="doc"><p>Folding operation of <code><a href="Database-HDBC-Schema-Driver.html#t:Log">Log</a></code> type.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:LogChan" class="def">LogChan</a> <a href="src/Database.HDBC.Schema.Driver.html#LogChan" class="link">Source</a> <a href="#t:LogChan" class="selflink">#</a></p><div class="doc"><p>Channel to store compile-time warning messages.</p></div></div><div class="top"><p class="src"><a id="v:newLogChan" class="def">newLogChan</a> :: <a href="../base-4.9.1.0/Data-Bool.html#t:Bool">Bool</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> <a href="src/Database.HDBC.Schema.Driver.html#newLogChan" class="link">Source</a> <a href="#v:newLogChan" class="selflink">#</a></p><div class="doc"><p>Build and return a new instance of <code><a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:takeLogs" class="def">takeLogs</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> [<a href="Database-HDBC-Schema-Driver.html#t:Log">Log</a>] <a href="src/Database.HDBC.Schema.Driver.html#takeLogs" class="link">Source</a> <a href="#v:takeLogs" class="selflink">#</a></p><div class="doc"><p>Take all logs list from channel.</p></div></div><div class="top"><p class="src"><a id="v:putWarning" class="def">putWarning</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Database.HDBC.Schema.Driver.html#putWarning" class="link">Source</a> <a href="#v:putWarning" class="selflink">#</a></p><div class="doc"><p>Push a warning string into <code><a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:putError" class="def">putError</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Database.HDBC.Schema.Driver.html#putError" class="link">Source</a> <a href="#v:putError" class="selflink">#</a></p><div class="doc"><p>Push an error string into <code><a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:putVerbose" class="def">putVerbose</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Database.HDBC.Schema.Driver.html#putVerbose" class="link">Source</a> <a href="#v:putVerbose" class="selflink">#</a></p><div class="doc"><p>Put verbose compile-time message as warning when <code>verboseAsWarning</code>.</p></div></div><div class="top"><p class="src"><a id="v:failWith" class="def">failWith</a> :: <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a> <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Database.HDBC.Schema.Driver.html#failWith" class="link">Source</a> <a href="#v:failWith" class="selflink">#</a></p><div class="doc"><p>Push an error string into <code><a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a></code> and return failed context.</p></div></div><div class="top"><p class="src"><a id="v:hoistMaybe" class="def">hoistMaybe</a> :: <a href="../base-4.9.1.0/Control-Monad.html#t:Monad">Monad</a> m =&gt; <a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a> a -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a> m a <a href="src/Database.HDBC.Schema.Driver.html#hoistMaybe" class="link">Source</a> <a href="#v:hoistMaybe" class="selflink">#</a></p><div class="doc"><p>Hoist from <code><a href="../base-4.9.1.0/Data-Maybe.html#t:Maybe">Maybe</a></code> context into <code><a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:maybeIO" class="def">maybeIO</a> :: b -&gt; (a -&gt; b) -&gt; <a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a> <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> a -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> b <a href="src/Database.HDBC.Schema.Driver.html#maybeIO" class="link">Source</a> <a href="#v:maybeIO" class="selflink">#</a></p><div class="doc"><p>Run <code><a href="../transformers-0.5.2.0/Control-Monad-Trans-Maybe.html#t:MaybeT">MaybeT</a></code> with default value.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Driver" class="def">Driver</a> conn <a href="src/Database.HDBC.Schema.Driver.html#Driver" class="link">Source</a> <a href="#t:Driver" class="selflink">#</a></p><div class="doc"><p>Interface type to load database system catalog via HDBC.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Driver" class="def">Driver</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:typeMap" class="def">typeMap</a> :: <a href="Database-HDBC-Schema-Driver.html#t:TypeMap">TypeMap</a></dfn><div class="doc"><p>Custom type mapping of this driver</p></div></li><li><dfn class="src"><a id="v:getFieldsWithMap" class="def">getFieldsWithMap</a> :: <a href="Database-HDBC-Schema-Driver.html#t:TypeMap">TypeMap</a> -&gt; conn -&gt; <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ([(<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, <a href="../template-haskell-2.11.1.0/Language-Haskell-TH-Lib.html#t:TypeQ">TypeQ</a>)], [<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a>])</dfn><div class="doc"><p>Get column name and Haskell type pairs and not-null columns index.</p></div></li><li><dfn class="src"><a id="v:getPrimaryKey" class="def">getPrimaryKey</a> :: conn -&gt; <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> [<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>]</dfn><div class="doc"><p>Get primary key column name.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:emptyDriver" class="def">emptyDriver</a> :: <a href="../HDBC-2.4.0.2/Database-HDBC-Types.html#t:IConnection">IConnection</a> conn =&gt; <a href="Database-HDBC-Schema-Driver.html#t:Driver">Driver</a> conn <a href="src/Database.HDBC.Schema.Driver.html#emptyDriver" class="link">Source</a> <a href="#v:emptyDriver" class="selflink">#</a></p><div class="doc"><p>Empty definition of <code><a href="Database-HDBC-Schema-Driver.html#t:Driver">Driver</a></code></p></div></div><div class="top"><p class="src"><a id="v:getFields" class="def">getFields</a> :: <a href="../HDBC-2.4.0.2/Database-HDBC-Types.html#t:IConnection">IConnection</a> conn =&gt; <a href="Database-HDBC-Schema-Driver.html#t:Driver">Driver</a> conn -&gt; conn -&gt; <a href="Database-HDBC-Schema-Driver.html#t:LogChan">LogChan</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.9.1.0/System-IO.html#t:IO">IO</a> ([(<a href="../base-4.9.1.0/Data-String.html#t:String">String</a>, <a href="../template-haskell-2.11.1.0/Language-Haskell-TH-Lib.html#t:TypeQ">TypeQ</a>)], [<a href="../base-4.9.1.0/Data-Int.html#t:Int">Int</a>]) <a href="src/Database.HDBC.Schema.Driver.html#getFields" class="link">Source</a> <a href="#v:getFields" class="selflink">#</a></p><div class="doc"><p>Helper function to call <code><a href="Database-HDBC-Schema-Driver.html#v:getFieldsWithMap">getFieldsWithMap</a></code> using <code><a href="Database-HDBC-Schema-Driver.html#v:typeMap">typeMap</a></code> of <code><a href="Database-HDBC-Schema-Driver.html#t:Driver">Driver</a></code>.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.17.3</p></div></body></html>