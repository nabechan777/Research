<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE CPP, ForeignFunctionInterface #-}</span><span></span><span>
</span><a name="line-2"></a><span class="hs-comment">-----------------------------------------------------------------------------------------</span><span>
</span><a name="line-3"></a><span class="hs-comment">{-|
Module      :  WxcObject
Copyright   :  (c) Daan Leijen 2003, 2004
License     :  wxWindows

Maintainer  :  wxhaskell-devel@lists.sourceforge.net
Stability   :  provisional
Portability :  portable

Basic object type.
-}</span><span></span><span>
</span><a name="line-14"></a><span class="hs-comment">-----------------------------------------------------------------------------------------</span><span>
</span><a name="line-15"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Graphics</span><span class="hs-operator">.</span><span class="hs-identifier">UI</span><span class="hs-operator">.</span><span class="hs-identifier">WXCore</span><span class="hs-operator">.</span><span class="hs-identifier">WxcObject</span><span class="hs-special">(</span><span></span><span>
</span><a name="line-16"></a><span>            </span><span class="hs-comment">-- * Object types</span><span>
</span><a name="line-17"></a><span>              </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectNull"><span class="hs-identifier hs-var">objectNull</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectIsNull"><span class="hs-identifier hs-var">objectIsNull</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectCast"><span class="hs-identifier hs-var">objectCast</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectIsManaged"><span class="hs-identifier hs-var">objectIsManaged</span></a><span></span><span>
</span><a name="line-18"></a><span>            </span><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectFromPtr"><span class="hs-identifier hs-var">objectFromPtr</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectFromManagedPtr"><span class="hs-identifier hs-var">objectFromManagedPtr</span></a><span></span><span>
</span><a name="line-19"></a><span>            </span><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier hs-var">withObjectPtr</span></a><span></span><span>
</span><a name="line-20"></a><span>            </span><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectFinalize"><span class="hs-identifier hs-var">objectFinalize</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#objectNoFinalize"><span class="hs-identifier hs-var">objectNoFinalize</span></a><span></span><span>
</span><a name="line-21"></a><span>            </span><span class="hs-comment">-- * Managed objects</span><span>
</span><a name="line-22"></a><span>            </span><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#TManagedPtr"><span class="hs-identifier hs-type">TManagedPtr</span></a><span class="hs-special">,</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#CManagedPtr"><span class="hs-identifier hs-type">CManagedPtr</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-23"></a><span>            </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span></span><span>
</span><a name="line-24"></a><span></span><span>
</span><a name="line-25"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">System</span><span class="hs-operator">.</span><span class="hs-identifier">IO</span><span class="hs-operator">.</span><span class="hs-identifier">Unsafe</span><span class="hs-special">(</span><span> </span><span class="hs-identifier hs-var">unsafePerformIO</span><span> </span><span class="hs-special">)</span><span></span><span>
</span><a name="line-26"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Foreign</span><span class="hs-operator">.</span><span class="hs-identifier">Ptr</span><span></span><span>
</span><a name="line-27"></a><span></span><span>
</span><a name="line-28"></a><span class="hs-comment">{- note: for GHC 6.10.2 or higher, recommends to use &quot;import Foreign.Concurrent&quot;
   See http://www.haskell.org/pipermail/cvs-ghc/2009-January/047120.html -}</span><span></span><span>
</span><a name="line-30"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Foreign</span><span class="hs-operator">.</span><span class="hs-identifier">ForeignPtr</span><span> </span><span class="hs-keyword">hiding</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">newForeignPtr</span><span class="hs-special">,</span><span class="hs-identifier hs-var">addForeignPtrFinalizer</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-31"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Foreign</span><span class="hs-operator">.</span><span class="hs-identifier">Concurrent</span><span></span><span>
</span><a name="line-32"></a><span></span><span>
</span><a name="line-33"></a><span class="hs-comment">{-----------------------------------------------------------------------------------------
    Objects
-----------------------------------------------------------------------------------------}</span><span></span><span>
</span><a name="line-36"></a><span></span><span>
</span><a name="line-37"></a><span class="hs-comment">{- | An @Object a@ is a pointer to an object of type @a@. The @a@ parameter is used
   to encode the inheritance relation. When the type parameter is unit @()@, it denotes
   an object of exactly that class, when the parameter is a type variable @a@, it
   specifies an object that is at least an instance of that class. For example in 
   wxWidgets, we have the following class hierarchy:

   &gt; EvtHandler
   &gt;   |- Window
   &gt;        |- Frame
   &gt;        |- Control
   &gt;            |- Button
   &gt;            |- Radiobox

   In wxHaskell, all the creation functions will return objects of exactly that
   class and use the @()@ type:

   &gt; frameCreate :: Window a -&gt; ... -&gt; IO (Frame ())
   &gt; buttonCreate :: Window a -&gt; ... -&gt; IO (Button ())
   &gt; ...

   In contrast, all the /this/ (or /self/) pointers of methods can take objects
   of any instance of that class and have a type variable, for example:

   &gt; windowSetClientSize :: Window a -&gt; Size -&gt; IO ()
   &gt; controlSetLabel     :: Control a -&gt; String -&gt; IO ()
   &gt; buttonSetDefault    :: Button a -&gt; IO ()

   This means that we can use @windowSetClientSize@ on any window, including
   buttons and frames, but we can only use @controlSetLabel@ on controls, not
   including frames.

   In wxHaskell, this works since a @Frame ()@ is actually a type synonym for
   @Window (CFrame ())@ (where @CFrame@ is an abstract data type). We can thus
   pass a value of type @Frame ()@ to anything that expects some @Window a@.
   For a button this works too, as it is a synonym for @Control (CButton ())@
   which is in turn a synonym for @Window (CControl (CButton ()))@. Note that
   we can\'t pass a frame to something that expects a value of type @Control a@.
   Of course, a @Window a@ is actually a type synonym for @EvtHandler (CWindow a)@.
   If you study the documentation in &quot;Graphics.UI.WX.Classes&quot; closely, you
   can discover where this chain ends :-).  

   Objects are not automatically deleted. Normally you can use a delete function
   like @windowDelete@ to delete an object. However, almost all objects in the
   wxWidgets library are automatically deleted by the library. The only objects
   that should be used with care are resources as bitmaps, fonts and brushes.
-}</span><span></span><span>
</span><a name="line-83"></a><span class="hs-keyword">data</span><span> </span><a name="Object"><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier">Object</span></a></a><span> </span><a name="local-6989586621679028114"><a href="#local-6989586621679028114"><span class="hs-identifier">a</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><a name="Object"><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier">Object</span></a></a><span>  </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ptr</span><span> </span><a href="#local-6989586621679028114"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-84"></a><span>                </span><span class="hs-glyph">|</span><span> </span><a name="Managed"><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier">Managed</span></a></a><span> </span><span class="hs-glyph">!</span><span class="hs-special">(</span><span class="hs-identifier hs-type">ForeignPtr</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#TManagedPtr"><span class="hs-identifier hs-type">TManagedPtr</span></a><span> </span><a href="#local-6989586621679028114"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-85"></a><span></span><span>
</span><a name="line-86"></a><span></span><span>
</span><a name="line-87"></a><span class="hs-comment">-- | Managed pointer (proxy) objects</span><span>
</span><a name="line-88"></a><span class="hs-keyword">type</span><span> </span><a name="ManagedPtr"><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier">ManagedPtr</span></a></a><span> </span><a name="local-6989586621679028001"><a href="#local-6989586621679028001"><span class="hs-identifier">a</span></a></a><span>   </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-type">Ptr</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#CManagedPtr"><span class="hs-identifier hs-type">CManagedPtr</span></a><span> </span><a href="#local-6989586621679028001"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-89"></a><span class="hs-keyword">type</span><span> </span><a name="TManagedPtr"><a href="Graphics.UI.WXCore.WxcObject.html#TManagedPtr"><span class="hs-identifier">TManagedPtr</span></a></a><span> </span><a name="local-6989586621679028000"><a href="#local-6989586621679028000"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#CManagedPtr"><span class="hs-identifier hs-type">CManagedPtr</span></a><span> </span><a href="#local-6989586621679028000"><span class="hs-identifier hs-type">a</span></a><span></span><span>
</span><a name="line-90"></a><span class="hs-keyword">data</span><span> </span><a name="CManagedPtr"><a href="Graphics.UI.WXCore.WxcObject.html#CManagedPtr"><span class="hs-identifier">CManagedPtr</span></a></a><span> </span><a name="local-6989586621679027999"><a href="#local-6989586621679027999"><span class="hs-identifier">a</span></a></a><span>  </span><span class="hs-glyph">=</span><span> </span><a name="CManagedPtr"><a href="Graphics.UI.WXCore.WxcObject.html#CManagedPtr"><span class="hs-identifier">CManagedPtr</span></a></a><span></span><span>
</span><a name="line-91"></a><span></span><span>
</span><a name="line-92"></a><span></span><span>
</span><a name="line-93"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Eq</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028823"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span></span><span>
</span><a name="line-94"></a><span>  </span><a name="local-6989586621679028824"><a href="#local-6989586621679028824"><span class="hs-identifier">obj1</span></a></a><span> </span><a name="local-3458764513820541095"><span class="hs-operator">==</span></a><span> </span><a name="local-6989586621679028825"><a href="#local-6989586621679028825"><span class="hs-identifier">obj2</span></a></a><span></span><span>
</span><a name="line-95"></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">unsafePerformIO</span><span> </span><span class="hs-operator hs-var">$</span><span></span><span>
</span><a name="line-96"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier hs-var">withObjectPtr</span></a><span> </span><a href="#local-6989586621679028824"><span class="hs-identifier hs-var">obj1</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679028826"><a href="#local-6989586621679028826"><span class="hs-identifier">p1</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span></span><span>
</span><a name="line-97"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier hs-var">withObjectPtr</span></a><span> </span><a href="#local-6989586621679028825"><span class="hs-identifier hs-var">obj2</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679028827"><a href="#local-6989586621679028827"><span class="hs-identifier">p2</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span></span><span>
</span><a name="line-98"></a><span>      </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679028826"><span class="hs-identifier hs-var">p1</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><a href="#local-6989586621679028827"><span class="hs-identifier hs-var">p2</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-99"></a><span></span><span>
</span><a name="line-100"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Ord</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028818"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span></span><span>
</span><a name="line-101"></a><span>  </span><a name="local-8214565720323790872"><span class="hs-identifier">compare</span></a><span> </span><a name="local-6989586621679028819"><a href="#local-6989586621679028819"><span class="hs-identifier">obj1</span></a></a><span> </span><a name="local-6989586621679028820"><a href="#local-6989586621679028820"><span class="hs-identifier">obj2</span></a></a><span></span><span>
</span><a name="line-102"></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">unsafePerformIO</span><span> </span><span class="hs-operator hs-var">$</span><span></span><span>
</span><a name="line-103"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier hs-var">withObjectPtr</span></a><span> </span><a href="#local-6989586621679028819"><span class="hs-identifier hs-var">obj1</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679028821"><a href="#local-6989586621679028821"><span class="hs-identifier">p1</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span></span><span>
</span><a name="line-104"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier hs-var">withObjectPtr</span></a><span> </span><a href="#local-6989586621679028820"><span class="hs-identifier hs-var">obj2</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679028822"><a href="#local-6989586621679028822"><span class="hs-identifier">p2</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span></span><span>
</span><a name="line-105"></a><span>      </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">compare</span><span> </span><a href="#local-6989586621679028821"><span class="hs-identifier hs-var">p1</span></a><span> </span><a href="#local-6989586621679028822"><span class="hs-identifier hs-var">p2</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-106"></a><span></span><span>
</span><a name="line-107"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Show</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028815"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span></span><span>
</span><a name="line-108"></a><span>  </span><a name="local-8214565720323790731"><span class="hs-identifier">show</span></a><span> </span><a name="local-6989586621679028816"><a href="#local-6989586621679028816"><span class="hs-identifier">obj</span></a></a><span></span><span>
</span><a name="line-109"></a><span>    </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">unsafePerformIO</span><span> </span><span class="hs-operator hs-var">$</span><span></span><span>
</span><a name="line-110"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier hs-var">withObjectPtr</span></a><span> </span><a href="#local-6989586621679028816"><span class="hs-identifier hs-var">obj</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679028817"><a href="#local-6989586621679028817"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span></span><span>
</span><a name="line-111"></a><span>      </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">show</span><span> </span><a href="#local-6989586621679028817"><span class="hs-identifier hs-var">p</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-112"></a><span></span><span>
</span><a name="line-113"></a><span class="hs-comment">-- | A null object. Use with care.</span><span>
</span><a name="line-114"></a><span class="hs-identifier">objectNull</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028750"><span class="hs-identifier hs-type">a</span></a><span></span><span>
</span><a name="line-115"></a><a name="objectNull"><a href="Graphics.UI.WXCore.WxcObject.html#objectNull"><span class="hs-identifier">objectNull</span></a></a><span></span><span>
</span><a name="line-116"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-var">Object</span></a><span> </span><span class="hs-identifier hs-var">nullPtr</span><span></span><span>
</span><a name="line-117"></a><span></span><span>
</span><a name="line-118"></a><span class="hs-comment">-- | Is this a managed object?</span><span>
</span><a name="line-119"></a><span class="hs-identifier">objectIsManaged</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028749"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span></span><span>
</span><a name="line-120"></a><a name="objectIsManaged"><a href="Graphics.UI.WXCore.WxcObject.html#objectIsManaged"><span class="hs-identifier">objectIsManaged</span></a></a><span> </span><a name="local-6989586621679028751"><a href="#local-6989586621679028751"><span class="hs-identifier">obj</span></a></a><span></span><span>
</span><a name="line-121"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679028751"><span class="hs-identifier hs-var">obj</span></a><span> </span><span class="hs-keyword">of</span><span></span><span>
</span><a name="line-122"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier hs-var">Managed</span></a><span> </span><a name="local-6989586621679028752"><a href="#local-6989586621679028752"><span class="hs-identifier">_fp</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">True</span><span></span><span>
</span><a name="line-123"></a><span>      </span><span class="hs-identifier">_</span><span>           </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">False</span><span></span><span>
</span><a name="line-124"></a><span></span><span>
</span><a name="line-125"></a><span class="hs-comment">-- | Test for null object.</span><span>
</span><a name="line-126"></a><span class="hs-identifier">objectIsNull</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028748"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">Bool</span><span></span><span>
</span><a name="line-127"></a><a name="objectIsNull"><a href="Graphics.UI.WXCore.WxcObject.html#objectIsNull"><span class="hs-identifier">objectIsNull</span></a></a><span> </span><a name="local-6989586621679028753"><a href="#local-6989586621679028753"><span class="hs-identifier">obj</span></a></a><span></span><span>
</span><a name="line-128"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-identifier hs-var">unsafePerformIO</span><span> </span><span class="hs-operator hs-var">$</span><span></span><span>
</span><a name="line-129"></a><span>    </span><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier hs-var">withObjectPtr</span></a><span> </span><a href="#local-6989586621679028753"><span class="hs-identifier hs-var">obj</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679028767"><a href="#local-6989586621679028767"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="#local-6989586621679028767"><span class="hs-identifier hs-var">p</span></a><span> </span><span class="hs-operator hs-var">==</span><span> </span><span class="hs-identifier hs-var">nullPtr</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-130"></a><span>      </span><span>
</span><a name="line-131"></a><span></span><span>
</span><a name="line-132"></a><span class="hs-comment">-- | Cast an object to another type. Use with care.</span><span>
</span><a name="line-133"></a><span class="hs-identifier">objectCast</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028746"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028747"><span class="hs-identifier hs-type">b</span></a><span></span><span>
</span><a name="line-134"></a><a name="objectCast"><a href="Graphics.UI.WXCore.WxcObject.html#objectCast"><span class="hs-identifier">objectCast</span></a></a><span> </span><a name="local-6989586621679028768"><a href="#local-6989586621679028768"><span class="hs-identifier">obj</span></a></a><span></span><span>
</span><a name="line-135"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679028768"><span class="hs-identifier hs-var">obj</span></a><span> </span><span class="hs-keyword">of</span><span></span><span>
</span><a name="line-136"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-var">Object</span></a><span> </span><a name="local-6989586621679028769"><a href="#local-6989586621679028769"><span class="hs-identifier">p</span></a></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-var">Object</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">castPtr</span><span> </span><a href="#local-6989586621679028769"><span class="hs-identifier hs-var">p</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-137"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier hs-var">Managed</span></a><span> </span><a name="local-6989586621679028770"><a href="#local-6989586621679028770"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier hs-var">Managed</span></a><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-var">castForeignPtr</span><span> </span><a href="#local-6989586621679028770"><span class="hs-identifier hs-var">fp</span></a><span class="hs-special">)</span><span> </span><span>
</span><a name="line-138"></a><span></span><span>
</span><a name="line-139"></a><span></span><span>
</span><a name="line-140"></a><span class="hs-comment">-- | Do something with the object pointer.</span><span>
</span><a name="line-141"></a><span class="hs-identifier">withObjectPtr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028744"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ptr</span><span> </span><a href="#local-6989586621679028744"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679028745"><span class="hs-identifier hs-type">b</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><a href="#local-6989586621679028745"><span class="hs-identifier hs-type">b</span></a><span></span><span>
</span><a name="line-142"></a><a name="withObjectPtr"><a href="Graphics.UI.WXCore.WxcObject.html#withObjectPtr"><span class="hs-identifier">withObjectPtr</span></a></a><span> </span><a name="local-6989586621679028771"><a href="#local-6989586621679028771"><span class="hs-identifier">obj</span></a></a><span> </span><a name="local-6989586621679028772"><a href="#local-6989586621679028772"><span class="hs-identifier">f</span></a></a><span></span><span>
</span><a name="line-143"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679028771"><span class="hs-identifier hs-var">obj</span></a><span> </span><span class="hs-keyword">of</span><span></span><span>
</span><a name="line-144"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-var">Object</span></a><span> </span><a name="local-6989586621679028773"><a href="#local-6989586621679028773"><span class="hs-identifier">p</span></a></a><span>   </span><span class="hs-glyph">-&gt;</span><span> </span><a href="#local-6989586621679028772"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679028773"><span class="hs-identifier hs-var">p</span></a><span></span><span>
</span><a name="line-145"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier hs-var">Managed</span></a><span> </span><a name="local-6989586621679028774"><a href="#local-6989586621679028774"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">withForeignPtr</span><span> </span><a href="#local-6989586621679028774"><span class="hs-identifier hs-var">fp</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><span class="hs-glyph">\</span><a name="local-6989586621679028802"><a href="#local-6989586621679028802"><span class="hs-identifier">mp</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span></span><span>
</span><a name="line-146"></a><span>                    </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679028803"><a href="#local-6989586621679028803"><span class="hs-identifier">p</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#wxManagedPtr_GetPtr"><span class="hs-identifier hs-var">wxManagedPtr_GetPtr</span></a><span> </span><a href="#local-6989586621679028802"><span class="hs-identifier hs-var">mp</span></a><span></span><span>
</span><a name="line-147"></a><span>                       </span><a href="#local-6989586621679028772"><span class="hs-identifier hs-var">f</span></a><span> </span><a href="#local-6989586621679028803"><span class="hs-identifier hs-var">p</span></a><span></span><span>
</span><a name="line-148"></a><span></span><span>
</span><a name="line-149"></a><span class="hs-comment">-- | Finalize a managed object manually. (No effect on unmanaged objects.)</span><span>
</span><a name="line-150"></a><span class="hs-identifier">objectFinalize</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028743"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-151"></a><a name="objectFinalize"><a href="Graphics.UI.WXCore.WxcObject.html#objectFinalize"><span class="hs-identifier">objectFinalize</span></a></a><span> </span><a name="local-6989586621679028804"><a href="#local-6989586621679028804"><span class="hs-identifier">obj</span></a></a><span></span><span>
</span><a name="line-152"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679028804"><span class="hs-identifier hs-var">obj</span></a><span> </span><span class="hs-keyword">of</span><span></span><span>
</span><a name="line-153"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-var">Object</span></a><span> </span><a name="local-6989586621679028805"><a href="#local-6989586621679028805"><span class="hs-identifier">_p</span></a></a><span>  </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-154"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier hs-var">Managed</span></a><span> </span><a name="local-6989586621679028806"><a href="#local-6989586621679028806"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">withForeignPtr</span><span> </span><a href="#local-6989586621679028806"><span class="hs-identifier hs-var">fp</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#wxManagedPtr_Finalize"><span class="hs-identifier hs-var">wxManagedPtr_Finalize</span></a><span></span><span>
</span><a name="line-155"></a><span>                          </span><span>
</span><a name="line-156"></a><span class="hs-comment">-- | Remove the finalizer on a managed object. (No effect on unmanaged objects.)</span><span>
</span><a name="line-157"></a><span class="hs-identifier">objectNoFinalize</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028742"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-158"></a><a name="objectNoFinalize"><a href="Graphics.UI.WXCore.WxcObject.html#objectNoFinalize"><span class="hs-identifier">objectNoFinalize</span></a></a><span> </span><a name="local-6989586621679028807"><a href="#local-6989586621679028807"><span class="hs-identifier">obj</span></a></a><span></span><span>
</span><a name="line-159"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">case</span><span> </span><a href="#local-6989586621679028807"><span class="hs-identifier hs-var">obj</span></a><span> </span><span class="hs-keyword">of</span><span></span><span>
</span><a name="line-160"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-var">Object</span></a><span>  </span><a name="local-6989586621679028808"><a href="#local-6989586621679028808"><span class="hs-identifier">_p</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-161"></a><span>      </span><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier hs-var">Managed</span></a><span> </span><a name="local-6989586621679028809"><a href="#local-6989586621679028809"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-var">withForeignPtr</span><span> </span><a href="#local-6989586621679028809"><span class="hs-identifier hs-var">fp</span></a><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#wxManagedPtr_NoFinalize"><span class="hs-identifier hs-var">wxManagedPtr_NoFinalize</span></a><span></span><span>
</span><a name="line-162"></a><span></span><span>
</span><a name="line-163"></a><span></span><span>
</span><a name="line-164"></a><span class="hs-comment">-- | Create an unmanaged object.</span><span>
</span><a name="line-165"></a><span class="hs-identifier">objectFromPtr</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Ptr</span><span> </span><a href="#local-6989586621679028741"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028741"><span class="hs-identifier hs-type">a</span></a><span></span><span>
</span><a name="line-166"></a><a name="objectFromPtr"><a href="Graphics.UI.WXCore.WxcObject.html#objectFromPtr"><span class="hs-identifier">objectFromPtr</span></a></a><span> </span><a name="local-6989586621679028810"><a href="#local-6989586621679028810"><span class="hs-identifier">p</span></a></a><span></span><span>
</span><a name="line-167"></a><span>  </span><span class="hs-glyph">=</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-var">Object</span></a><span> </span><a href="#local-6989586621679028810"><span class="hs-identifier hs-var">p</span></a><span></span><span>
</span><a name="line-168"></a><span></span><span>
</span><a name="line-169"></a><span class="hs-comment">-- | Create a managed object with a given finalizer.</span><span>
</span><a name="line-170"></a><span class="hs-identifier">objectFromManagedPtr</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span> </span><a href="#local-6989586621679028740"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#Object"><span class="hs-identifier hs-type">Object</span></a><span> </span><a href="#local-6989586621679028740"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-171"></a><a name="objectFromManagedPtr"><a href="Graphics.UI.WXCore.WxcObject.html#objectFromManagedPtr"><span class="hs-identifier">objectFromManagedPtr</span></a></a><span> </span><a name="local-6989586621679028811"><a href="#local-6989586621679028811"><span class="hs-identifier">mp</span></a></a><span></span><span>
</span><a name="line-172"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679028812"><a href="#local-6989586621679028812"><span class="hs-identifier">fun</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#wxManagedPtrDeleteFunction"><span class="hs-identifier hs-var">wxManagedPtrDeleteFunction</span></a><span></span><span>
</span><a name="line-173"></a><span>       </span><span class="hs-comment">-- wxManagedPtr_NoFinalize mp    {- turn off finalization -}</span><span>
</span><a name="line-174"></a><span>       </span><a name="local-6989586621679028813"><a href="#local-6989586621679028813"><span class="hs-identifier">fp</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><span class="hs-identifier hs-var">newForeignPtr</span><span> </span><a href="#local-6989586621679028811"><span class="hs-identifier hs-var">mp</span></a><span> </span><span class="hs-special">(</span><a href="#local-6989586621679028812"><span class="hs-identifier hs-var">fun</span></a><span> </span><a href="#local-6989586621679028811"><span class="hs-identifier hs-var">mp</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-175"></a><span>       </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#Managed"><span class="hs-identifier hs-var">Managed</span></a><span> </span><a href="#local-6989586621679028813"><span class="hs-identifier hs-var">fp</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-176"></a><span></span><span>
</span><a name="line-177"></a><span></span><span>
</span><a name="line-178"></a><span class="hs-identifier">wxManagedPtrDeleteFunction</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span> </span><a href="#local-6989586621679028298"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-179"></a><a name="wxManagedPtrDeleteFunction"><a href="Graphics.UI.WXCore.WxcObject.html#wxManagedPtrDeleteFunction"><span class="hs-identifier">wxManagedPtrDeleteFunction</span></a></a><span></span><span>
</span><a name="line-180"></a><span>  </span><span class="hs-glyph">=</span><span> </span><span class="hs-keyword">do</span><span> </span><a name="local-6989586621679028814"><a href="#local-6989586621679028814"><span class="hs-identifier">fun</span></a></a><span> </span><span class="hs-glyph">&lt;-</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#wxManagedPtr_GetDeleteFunction"><span class="hs-identifier hs-var">wxManagedPtr_GetDeleteFunction</span></a><span></span><span>
</span><a name="line-181"></a><span>       </span><span class="hs-identifier hs-var">return</span><span> </span><span class="hs-operator hs-var">$</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#wxManagedPtr_CallbackFunction"><span class="hs-identifier hs-var">wxManagedPtr_CallbackFunction</span></a><span> </span><a href="#local-6989586621679028814"><span class="hs-identifier hs-var">fun</span></a><span></span><span>
</span><a name="line-182"></a><span></span><span>
</span><a name="line-183"></a><span class="hs-comment">{--------------------------------------------------------------------------
  Managed pointers
--------------------------------------------------------------------------}</span><span></span><span>
</span><a name="line-186"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">wxManagedPtr_GetPtr</span><span>     </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Ptr</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#TManagedPtr"><span class="hs-identifier hs-type">TManagedPtr</span></a><span> </span><a href="#local-6989586621679028832"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Ptr</span><span> </span><a href="#local-6989586621679028832"><span class="hs-identifier hs-type">a</span></a><span class="hs-special">)</span><span></span><span>
</span><a name="line-187"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">wxManagedPtr_Finalize</span><span>   </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span> </span><a href="#local-6989586621679028831"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-188"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">wxManagedPtr_NoFinalize</span><span> </span><span class="hs-glyph">::</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span> </span><a href="#local-6989586621679028830"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-189"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-identifier">wxManagedPtr_GetDeleteFunction</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">FunPtr</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span> </span><a href="#local-6989586621679028829"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-190"></a><span class="hs-identifier">foreign</span><span> </span><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">ccall</span><span> </span><span class="hs-string">&quot;dynamic&quot;</span><span> </span><span class="hs-identifier">wxManagedPtr_CallbackFunction</span><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">FunPtr</span><span> </span><span class="hs-special">(</span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span> </span><a href="#local-6989586621679028828"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">)</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><a href="Graphics.UI.WXCore.WxcObject.html#ManagedPtr"><span class="hs-identifier hs-type">ManagedPtr</span></a><span> </span><a href="#local-6989586621679028828"><span class="hs-identifier hs-type">a</span></a><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span></span><span>
</span><a name="line-191"></a></pre></body></html>