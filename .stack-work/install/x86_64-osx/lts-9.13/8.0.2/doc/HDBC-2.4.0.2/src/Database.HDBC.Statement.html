<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-pragma">{-# LANGUAGE DeriveDataTypeable #-}</span><span>
</span><a name="line-2"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">HDBC</span><span class="hs-operator">.</span><span class="hs-identifier">Statement</span><span>
</span><a name="line-3"></a><span>    </span><span class="hs-special">(</span><span>
</span><a name="line-4"></a><span>    </span><a href="Database.HDBC.Statement.html#Statement"><span class="hs-identifier hs-type">Statement</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-5"></a><span>    </span><a href="Database.HDBC.Statement.html#SqlError"><span class="hs-identifier hs-type">SqlError</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-6"></a><span>
</span><a name="line-7"></a><span>    </span><span class="hs-comment">-- * Re-exported from &quot;Database.HDBC.SqlValue&quot;; this re-exporting is deprecated</span><span>
</span><a name="line-8"></a><span>    </span><a href="Database.HDBC.SqlValue.html#nToSql"><span class="hs-identifier hs-var">nToSql</span></a><span class="hs-special">,</span><span> </span><a href="Database.HDBC.SqlValue.html#iToSql"><span class="hs-identifier hs-var">iToSql</span></a><span class="hs-special">,</span><span> </span><a href="Database.HDBC.SqlValue.html#posixToSql"><span class="hs-identifier hs-var">posixToSql</span></a><span class="hs-special">,</span><span> </span><a href="Database.HDBC.SqlValue.html#fromSql"><span class="hs-identifier hs-var">fromSql</span></a><span class="hs-special">,</span><span> </span><a href="Database.HDBC.SqlValue.html#safeFromSql"><span class="hs-identifier hs-var">safeFromSql</span></a><span class="hs-special">,</span><span> </span><a href="Database.HDBC.SqlValue.html#toSql"><span class="hs-identifier hs-var">toSql</span></a><span class="hs-special">,</span><span>
</span><a name="line-9"></a><span>    </span><a href="Database.HDBC.SqlValue.html#SqlValue"><span class="hs-identifier hs-type">SqlValue</span></a><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span>
</span><a name="line-10"></a><span>    </span><span class="hs-special">)</span><span>
</span><a name="line-11"></a><span>
</span><a name="line-12"></a><span class="hs-keyword">where</span><span>
</span><a name="line-13"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Data</span><span class="hs-operator">.</span><span class="hs-identifier">Dynamic</span><span>
</span><a name="line-14"></a><span class="hs-keyword">import</span><span> </span><a href="Database.HDBC.ColTypes.html"><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">HDBC</span><span class="hs-operator">.</span><span class="hs-identifier">ColTypes</span></a><span>
</span><a name="line-15"></a><span class="hs-keyword">import</span><span> </span><a href="Database.HDBC.SqlValue.html"><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">HDBC</span><span class="hs-operator">.</span><span class="hs-identifier">SqlValue</span></a><span>
</span><a name="line-16"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Control</span><span class="hs-operator">.</span><span class="hs-identifier">Exception</span><span>
</span><a name="line-17"></a><span>
</span><a name="line-18"></a><span class="hs-keyword">data</span><span> </span><a name="Statement"><a href="Database.HDBC.Statement.html#Statement"><span class="hs-identifier">Statement</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="Statement"><a href="Database.HDBC.Statement.html#Statement"><span class="hs-identifier">Statement</span></a></a><span>
</span><a name="line-19"></a><span>    </span><span class="hs-special">{</span><span>
</span><a name="line-20"></a><span>     </span><span class="hs-comment">{- | Execute the prepared statement, passing in the given positional
        parameters (that should take the place of the question marks
        in the call to 'prepare').

        For non-SELECT queries, the return value is the number of
        rows modified, if known.  If no rows were modified, you get 0.
        If the value is unknown, you get -1.  All current HDBC drivers
        support this function and should never return -1.

        For SELECT queries, you will always get 0.

        This function should automatically call finish() to finish the previous
        execution, if necessary.
        -}</span><span>
</span><a name="line-34"></a><span>     </span><a name="execute"><a href="Database.HDBC.Statement.html#execute"><span class="hs-identifier">execute</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><a href="Database.HDBC.SqlValue.html#SqlValue"><span class="hs-identifier hs-type">SqlValue</span></a><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-identifier hs-type">Integer</span><span class="hs-special">,</span><span>
</span><a name="line-35"></a><span>
</span><a name="line-36"></a><span>     </span><span class="hs-comment">{- | Execute the statement as-is, without supplying any
        positional parameters.  This is intended for statements for
        which the results aren't interesting or present (e.g., DDL or
        DML commands).  If your query contains placeholders, this will
        certainly fail; use 'execute' instead. -}</span><span>
</span><a name="line-41"></a><span>     </span><a name="executeRaw"><a href="Database.HDBC.Statement.html#executeRaw"><span class="hs-identifier">executeRaw</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-42"></a><span>
</span><a name="line-43"></a><span>     </span><span class="hs-comment">{- | Execute the query with many rows. 
        The return value is the return value from the final row 
        as if you had called 'execute' on it.

        Due to optimizations that are possible due to different
        databases and driver designs, this can often be significantly
        faster than using 'execute' multiple times since queries
        need to be compiled only once.

        This is most useful for non-SELECT statements. -}</span><span>
</span><a name="line-53"></a><span>     </span><a name="executeMany"><a href="Database.HDBC.Statement.html#executeMany"><span class="hs-identifier">executeMany</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-special">[</span><span class="hs-special">[</span><a href="Database.HDBC.SqlValue.html#SqlValue"><span class="hs-identifier hs-type">SqlValue</span></a><span class="hs-special">]</span><span class="hs-special">]</span><span> </span><span class="hs-glyph">-&gt;</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-54"></a><span>                 </span><span>
</span><a name="line-55"></a><span>     </span><span class="hs-comment">{- | Abort a query in progress -- usually not needed. -}</span><span>
</span><a name="line-56"></a><span>     </span><a name="finish"><a href="Database.HDBC.Statement.html#finish"><span class="hs-identifier">finish</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-57"></a><span>
</span><a name="line-58"></a><span>     </span><span class="hs-comment">{- | Fetches one row from the DB.  Returns 'Nothing' if there
        are no more rows.  Will automatically call 'finish' when
        the last row is read. -}</span><span>
</span><a name="line-61"></a><span>     </span><a name="fetchRow"><a href="Database.HDBC.Statement.html#fetchRow"><span class="hs-identifier">fetchRow</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Maybe</span><span> </span><span class="hs-special">[</span><a href="Database.HDBC.SqlValue.html#SqlValue"><span class="hs-identifier hs-type">SqlValue</span></a><span class="hs-special">]</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span>     </span><span class="hs-comment">{- | Returns a list of the column names in the result.
        For maximum portability, you should not assume that
        information is available until after an 'execute' function
        has been run.
        
        Information is returned here directly as returned
        by the underlying database layer.  Note that different
        databases have different rules about capitalization
        of return values and about representation of names
        of columns that are not simple columns.  For this reason,
        it is suggested that you treat this information for
        display purposes only.  Failing that, you should convert
        to lower (or upper) case, and use @AS@ clauses for
        anything other than simple columns.

        A simple getColumnNames implementation could simply
        apply @map fst@ to the return value of 'describeResult'.
        -}</span><span>
</span><a name="line-81"></a><span>     </span><a name="getColumnNames"><a href="Database.HDBC.Statement.html#getColumnNames"><span class="hs-identifier">getColumnNames</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><span class="hs-identifier hs-type">String</span><span class="hs-special">]</span><span class="hs-special">,</span><span>
</span><a name="line-82"></a><span>
</span><a name="line-83"></a><span>
</span><a name="line-84"></a><span>     </span><span class="hs-comment">{- | The original query that this 'Statement' was prepared
          with. -}</span><span>
</span><a name="line-86"></a><span>     </span><a name="originalQuery"><a href="Database.HDBC.Statement.html#originalQuery"><span class="hs-identifier">originalQuery</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span>
</span><a name="line-87"></a><span>     </span><span class="hs-comment">{- | Obtain information about the columns in the result set.
          Must be run only after 'execute'.  The String in the result
          set is the column name.

          You should expect this to be returned in the same manner
          as a result from 'Database.HDBC.fetchAllRows''.

          All results should be converted to lowercase for you
          before you see them.

          Please see caveats under 'getColumnNames' for information
          on the column name field here.
 -}</span><span>
</span><a name="line-100"></a><span>     </span><a name="describeResult"><a href="Database.HDBC.Statement.html#describeResult"><span class="hs-identifier">describeResult</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">IO</span><span> </span><span class="hs-special">[</span><span class="hs-special">(</span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span> </span><a href="Database.HDBC.ColTypes.html#SqlColDesc"><span class="hs-identifier hs-type">SqlColDesc</span></a><span class="hs-special">)</span><span class="hs-special">]</span><span>
</span><a name="line-101"></a><span>    </span><span class="hs-special">}</span><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span class="hs-comment">{- | The main HDBC exception object.  As much information as possible
is passed from the database through to the application through this object.

Errors generated in the Haskell layer will have seNativeError set to -1.
-}</span><span>
</span><a name="line-108"></a><span class="hs-keyword">data</span><span> </span><a name="SqlError"><a href="Database.HDBC.Statement.html#SqlError"><span class="hs-identifier">SqlError</span></a></a><span> </span><span class="hs-glyph">=</span><span> </span><a name="SqlError"><a href="Database.HDBC.Statement.html#SqlError"><span class="hs-identifier">SqlError</span></a></a><span> </span><span class="hs-special">{</span><a name="seState"><a href="Database.HDBC.Statement.html#seState"><span class="hs-identifier">seState</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">,</span><span>
</span><a name="line-109"></a><span>                          </span><a name="seNativeError"><a href="Database.HDBC.Statement.html#seNativeError"><span class="hs-identifier">seNativeError</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">Int</span><span class="hs-special">,</span><span>
</span><a name="line-110"></a><span>                          </span><a name="seErrorMsg"><a href="Database.HDBC.Statement.html#seErrorMsg"><span class="hs-identifier">seErrorMsg</span></a></a><span> </span><span class="hs-glyph">::</span><span> </span><span class="hs-identifier hs-type">String</span><span class="hs-special">}</span><span>
</span><a name="line-111"></a><span>                </span><span class="hs-keyword">deriving</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">Eq</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Show</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Read</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Typeable</span><span class="hs-special">)</span><span>
</span><a name="line-112"></a><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span class="hs-cpp">#if __GLASGOW_HASKELL__ &gt;= 610</span><span>
</span><a name="line-115"></a><span class="hs-comment">--data SqlException</span><span>
</span><a name="line-116"></a><span class="hs-keyword">instance</span><span> </span><span class="hs-identifier hs-type">Exception</span><span> </span><a href="Database.HDBC.Statement.html#SqlError"><span class="hs-identifier hs-type">SqlError</span></a><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-117"></a><span class="hs-comment">{-
    toException = SomeException
    fromException (SomeException e) = Just e
    fromException _ = Nothing
-}</span><span>
</span><a name="line-122"></a><span class="hs-cpp">#endif</span><span>
</span><a name="line-123"></a></pre></body></html>