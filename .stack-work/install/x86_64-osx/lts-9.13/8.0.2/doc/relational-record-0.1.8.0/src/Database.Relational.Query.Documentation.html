<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><link rel="stylesheet" type="text/css" href="style.css" /><script type="text/javascript" src="highlight.js"></script></head><body><pre><span class="hs-comment">-- |</span><span>
</span><a name="line-2"></a><span class="hs-comment">-- Module      : Database.Relational.Query.Documentation</span><span>
</span><a name="line-3"></a><span class="hs-comment">-- Copyright   : 2014-2017 Kei Hibino</span><span>
</span><a name="line-4"></a><span class="hs-comment">-- License     : BSD3</span><span>
</span><a name="line-5"></a><span class="hs-comment">--</span><span>
</span><a name="line-6"></a><span class="hs-comment">-- Maintainer  : ex8k.hibino@gmail.com</span><span>
</span><a name="line-7"></a><span class="hs-comment">-- Stability   : experimental</span><span>
</span><a name="line-8"></a><span class="hs-comment">-- Portability : unknown</span><span>
</span><a name="line-9"></a><span class="hs-comment">--</span><span>
</span><a name="line-10"></a><span class="hs-comment">-- This module is documentation module for relational-record.</span><span>
</span><a name="line-11"></a><span class="hs-comment">-- The project page of relational-record is</span><span>
</span><a name="line-12"></a><span class="hs-comment">-- http://khibino.github.io/haskell-relational-record/ .</span><span>
</span><a name="line-13"></a><span class="hs-keyword">module</span><span> </span><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">Relational</span><span class="hs-operator">.</span><span class="hs-identifier">Query</span><span class="hs-operator">.</span><span class="hs-identifier">Documentation</span><span> </span><span class="hs-special">(</span><span>
</span><a name="line-14"></a><span>  </span><span class="hs-comment">-- * Concepts</span><span>
</span><a name="line-15"></a><span>  </span><span class="hs-comment">-- $concepts</span><span>
</span><a name="line-16"></a><span>
</span><a name="line-17"></a><span>  </span><span class="hs-comment">-- * Relational Query Building DSL</span><span>
</span><a name="line-18"></a><span>  </span><span class="hs-comment">-- $queryBuildingDSL</span><span>
</span><a name="line-19"></a><span>
</span><a name="line-20"></a><span>  </span><span class="hs-comment">-- ** Monadic Query Context Building</span><span>
</span><a name="line-21"></a><span>  </span><span class="hs-comment">-- $monadicContext</span><span>
</span><a name="line-22"></a><span>
</span><a name="line-23"></a><span>  </span><span class="hs-comment">-- *** Monadic Operators</span><span>
</span><a name="line-24"></a><span>  </span><span class="hs-comment">-- $monadicOperator</span><span>
</span><a name="line-25"></a><span>  </span><span class="hs-identifier hs-var">query</span><span class="hs-special">,</span><span>
</span><a name="line-26"></a><span>  </span><span class="hs-identifier hs-var">queryMaybe</span><span class="hs-special">,</span><span>
</span><a name="line-27"></a><span>
</span><a name="line-28"></a><span>  </span><span class="hs-identifier hs-var">on</span><span class="hs-special">,</span><span>
</span><a name="line-29"></a><span>  </span><span class="hs-identifier hs-var">wheres</span><span class="hs-special">,</span><span>
</span><a name="line-30"></a><span>
</span><a name="line-31"></a><span>  </span><span class="hs-identifier hs-var">groupBy</span><span class="hs-special">,</span><span>
</span><a name="line-32"></a><span>
</span><a name="line-33"></a><span>  </span><span class="hs-identifier hs-var">having</span><span class="hs-special">,</span><span>
</span><a name="line-34"></a><span>
</span><a name="line-35"></a><span>  </span><span class="hs-identifier hs-var">distinct</span><span class="hs-special">,</span><span>
</span><a name="line-36"></a><span>  </span><span class="hs-identifier hs-var">all'</span><span class="hs-special">,</span><span>
</span><a name="line-37"></a><span>
</span><a name="line-38"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;-#</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-39"></a><span>
</span><a name="line-40"></a><span>  </span><span class="hs-comment">-- *** Direct Join Operators</span><span>
</span><a name="line-41"></a><span>  </span><span class="hs-comment">-- $directJoin</span><span>
</span><a name="line-42"></a><span>  </span><span class="hs-identifier hs-var">inner</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">left</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">right</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">full</span><span class="hs-special">,</span><span>
</span><a name="line-43"></a><span>  </span><span class="hs-identifier hs-var">on'</span><span class="hs-special">,</span><span>
</span><a name="line-44"></a><span>
</span><a name="line-45"></a><span>  </span><span class="hs-identifier hs-type">JoinRestriction</span><span class="hs-special">,</span><span>
</span><a name="line-46"></a><span>
</span><a name="line-47"></a><span>  </span><span class="hs-comment">-- *** Finalize Context</span><span>
</span><a name="line-48"></a><span>  </span><span class="hs-comment">-- $finalize</span><span>
</span><a name="line-49"></a><span>  </span><span class="hs-identifier hs-type">Relation</span><span class="hs-special">,</span><span>
</span><a name="line-50"></a><span>  </span><span class="hs-identifier hs-var">relation</span><span class="hs-special">,</span><span>
</span><a name="line-51"></a><span>  </span><span class="hs-identifier hs-var">aggregateRelation</span><span class="hs-special">,</span><span>
</span><a name="line-52"></a><span>
</span><a name="line-53"></a><span>  </span><span class="hs-identifier hs-type">UpdateTarget</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">updateTarget</span><span class="hs-special">,</span><span>
</span><a name="line-54"></a><span>  </span><span class="hs-identifier hs-type">Restriction</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">restriction</span><span class="hs-special">,</span><span>
</span><a name="line-55"></a><span>
</span><a name="line-56"></a><span>  </span><span class="hs-comment">-- ** Projection</span><span>
</span><a name="line-57"></a><span>  </span><span class="hs-comment">-- $projection</span><span>
</span><a name="line-58"></a><span>
</span><a name="line-59"></a><span>  </span><span class="hs-comment">-- *** Projection Type</span><span>
</span><a name="line-60"></a><span>  </span><span class="hs-comment">-- $projectionType</span><span>
</span><a name="line-61"></a><span>  </span><span class="hs-identifier hs-type">Projection</span><span class="hs-special">,</span><span>
</span><a name="line-62"></a><span>
</span><a name="line-63"></a><span>  </span><span class="hs-identifier hs-type">Flat</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">Aggregated</span><span class="hs-special">,</span><span>
</span><a name="line-64"></a><span>
</span><a name="line-65"></a><span>  </span><span class="hs-identifier hs-type">Exists</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">OverWindow</span><span class="hs-special">,</span><span>
</span><a name="line-66"></a><span>
</span><a name="line-67"></a><span>  </span><span class="hs-comment">-- *** Projection Path</span><span>
</span><a name="line-68"></a><span>  </span><span class="hs-comment">-- $projectionPath</span><span>
</span><a name="line-69"></a><span>  </span><span class="hs-identifier hs-type">Pi</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">!</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;.&gt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-70"></a><span>
</span><a name="line-71"></a><span>  </span><span class="hs-comment">-- *** Projection Operators</span><span>
</span><a name="line-72"></a><span>  </span><span class="hs-comment">-- $projectionOperators</span><span>
</span><a name="line-73"></a><span>  </span><span class="hs-identifier hs-type">ShowConstantTermsSQL</span><span class="hs-special">,</span><span>
</span><a name="line-74"></a><span>
</span><a name="line-75"></a><span>  </span><span class="hs-identifier hs-var">value</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">values</span><span class="hs-special">,</span><span>
</span><a name="line-76"></a><span>
</span><a name="line-77"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">.=.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.&lt;.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.&lt;=.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.&gt;.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.&gt;=.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.&lt;&gt;.</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-78"></a><span>
</span><a name="line-79"></a><span>  </span><span class="hs-identifier hs-var">and'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">or'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">in'</span><span class="hs-special">,</span><span>
</span><a name="line-80"></a><span>
</span><a name="line-81"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">.||.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">like</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">like'</span><span class="hs-special">,</span><span>
</span><a name="line-82"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">.+.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.-.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">.*.</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">./.</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-83"></a><span>
</span><a name="line-84"></a><span>  </span><span class="hs-identifier hs-var">isNothing</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">isJust</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">fromMaybe</span><span class="hs-special">,</span><span>
</span><a name="line-85"></a><span>
</span><a name="line-86"></a><span>  </span><span class="hs-identifier hs-var">not'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">exists</span><span class="hs-special">,</span><span>
</span><a name="line-87"></a><span>
</span><a name="line-88"></a><span>  </span><span class="hs-identifier hs-var">negate'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">fromIntegral'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">showNum</span><span class="hs-special">,</span><span>
</span><a name="line-89"></a><span>
</span><a name="line-90"></a><span>  </span><span class="hs-identifier hs-var">casesOrElse</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">case'</span><span class="hs-special">,</span><span>
</span><a name="line-91"></a><span>
</span><a name="line-92"></a><span>  </span><span class="hs-comment">-- ** Aggregate and Window Functions</span><span>
</span><a name="line-93"></a><span>  </span><span class="hs-comment">-- $aggregateFunctions</span><span>
</span><a name="line-94"></a><span>  </span><span class="hs-identifier hs-var">count</span><span class="hs-special">,</span><span>
</span><a name="line-95"></a><span>  </span><span class="hs-identifier hs-var">sum'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">avg</span><span class="hs-special">,</span><span>
</span><a name="line-96"></a><span>  </span><span class="hs-identifier hs-var">max'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">min'</span><span class="hs-special">,</span><span>
</span><a name="line-97"></a><span>  </span><span class="hs-identifier hs-var">every</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">any'</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">some'</span><span class="hs-special">,</span><span>
</span><a name="line-98"></a><span>
</span><a name="line-99"></a><span>  </span><span class="hs-identifier hs-var">over</span><span class="hs-special">,</span><span>
</span><a name="line-100"></a><span>
</span><a name="line-101"></a><span>  </span><span class="hs-identifier hs-var">rank</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">denseRank</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">rowNumber</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">percentRank</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">cumeDist</span><span class="hs-special">,</span><span>
</span><a name="line-102"></a><span>
</span><a name="line-103"></a><span>  </span><span class="hs-comment">-- ** Set Operators</span><span>
</span><a name="line-104"></a><span>  </span><span class="hs-comment">-- $setOperators</span><span>
</span><a name="line-105"></a><span>  </span><span class="hs-identifier hs-var">union</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">except</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">intersect</span><span class="hs-special">,</span><span>
</span><a name="line-106"></a><span>
</span><a name="line-107"></a><span>  </span><span class="hs-comment">-- ** Maybe Projections</span><span>
</span><a name="line-108"></a><span>  </span><span class="hs-comment">-- $maybeProjection</span><span>
</span><a name="line-109"></a><span>  </span><span class="hs-identifier hs-var">just</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-var">flattenMaybe</span><span class="hs-special">,</span><span>
</span><a name="line-110"></a><span>
</span><a name="line-111"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">?!</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">?!?</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-112"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;?.&gt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span> </span><span class="hs-special">(</span><span class="hs-operator hs-var">&lt;?.?&gt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-113"></a><span>
</span><a name="line-114"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">?+?</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-115"></a><span>  </span><span class="hs-identifier hs-var">negateMaybe</span><span class="hs-special">,</span><span>
</span><a name="line-116"></a><span>  </span><span class="hs-identifier hs-var">sumMaybe</span><span class="hs-special">,</span><span>
</span><a name="line-117"></a><span>
</span><a name="line-118"></a><span>  </span><span class="hs-comment">-- ** Placeholders</span><span>
</span><a name="line-119"></a><span>  </span><span class="hs-comment">-- $placeholders</span><span>
</span><a name="line-120"></a><span>  </span><span class="hs-identifier hs-var">placeholder</span><span class="hs-special">,</span><span>
</span><a name="line-121"></a><span>
</span><a name="line-122"></a><span>  </span><span class="hs-identifier hs-var">query'</span><span class="hs-special">,</span><span>
</span><a name="line-123"></a><span>  </span><span class="hs-identifier hs-var">left'</span><span class="hs-special">,</span><span>
</span><a name="line-124"></a><span>  </span><span class="hs-identifier hs-var">relation'</span><span class="hs-special">,</span><span>
</span><a name="line-125"></a><span>  </span><span class="hs-identifier hs-var">updateTarget'</span><span class="hs-special">,</span><span>
</span><a name="line-126"></a><span>  </span><span class="hs-identifier hs-var">restriction'</span><span class="hs-special">,</span><span>
</span><a name="line-127"></a><span>  </span><span class="hs-identifier hs-var">union'</span><span class="hs-special">,</span><span>
</span><a name="line-128"></a><span>
</span><a name="line-129"></a><span>  </span><span class="hs-comment">-- ** Record Mapping</span><span>
</span><a name="line-130"></a><span>  </span><span class="hs-comment">-- $recordMapping</span><span>
</span><a name="line-131"></a><span>  </span><span class="hs-identifier hs-type">ProductConstructor</span><span class="hs-special">,</span><span>
</span><a name="line-132"></a><span>  </span><span class="hs-identifier hs-type">ProjectableFunctor</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-133"></a><span>  </span><span class="hs-identifier hs-type">ProjectableApplicative</span><span> </span><span class="hs-special">(</span><span class="hs-glyph">..</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-134"></a><span>  </span><span class="hs-special">(</span><span class="hs-operator hs-var">&gt;&lt;</span><span class="hs-special">)</span><span class="hs-special">,</span><span>
</span><a name="line-135"></a><span>
</span><a name="line-136"></a><span>  </span><span class="hs-comment">-- ** Database Statements</span><span>
</span><a name="line-137"></a><span>  </span><span class="hs-comment">-- $databaseStatements</span><span>
</span><a name="line-138"></a><span>  </span><span class="hs-identifier hs-var">relationalQuery</span><span class="hs-special">,</span><span>
</span><a name="line-139"></a><span>  </span><span class="hs-identifier hs-var">typedInsert</span><span class="hs-special">,</span><span>
</span><a name="line-140"></a><span>  </span><span class="hs-identifier hs-var">typedInsertQuery</span><span class="hs-special">,</span><span>
</span><a name="line-141"></a><span>  </span><span class="hs-identifier hs-var">typedUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-142"></a><span>  </span><span class="hs-identifier hs-var">typedDelete</span><span class="hs-special">,</span><span>
</span><a name="line-143"></a><span>  </span><span class="hs-identifier hs-var">typedKeyUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-144"></a><span>
</span><a name="line-145"></a><span>  </span><span class="hs-identifier hs-var">derivedInsert</span><span class="hs-special">,</span><span>
</span><a name="line-146"></a><span>  </span><span class="hs-identifier hs-var">derivedInsertQuery</span><span class="hs-special">,</span><span>
</span><a name="line-147"></a><span>  </span><span class="hs-identifier hs-var">derivedUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-148"></a><span>  </span><span class="hs-identifier hs-var">derivedDelete</span><span class="hs-special">,</span><span>
</span><a name="line-149"></a><span>
</span><a name="line-150"></a><span>  </span><span class="hs-comment">-- * Database Operations</span><span>
</span><a name="line-151"></a><span>  </span><span class="hs-comment">-- $databaseOperations</span><span>
</span><a name="line-152"></a><span>
</span><a name="line-153"></a><span>  </span><span class="hs-comment">-- ** Conversion interfaces to communicate with database</span><span>
</span><a name="line-154"></a><span>  </span><span class="hs-comment">-- $conversionInterfaces</span><span>
</span><a name="line-155"></a><span>  </span><span class="hs-identifier hs-type">FromSql</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">ToSql</span><span class="hs-special">,</span><span>
</span><a name="line-156"></a><span>  </span><span class="hs-identifier hs-type">RecordFromSql</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">RecordToSql</span><span class="hs-special">,</span><span>
</span><a name="line-157"></a><span>
</span><a name="line-158"></a><span>  </span><span class="hs-comment">-- ** Generalized Statement</span><span>
</span><a name="line-159"></a><span>  </span><span class="hs-comment">-- $generalizedStmt</span><span>
</span><a name="line-160"></a><span>  </span><span class="hs-identifier hs-var">prepareNoFetch</span><span class="hs-special">,</span><span>
</span><a name="line-161"></a><span>  </span><span class="hs-identifier hs-var">bind</span><span class="hs-special">,</span><span>
</span><a name="line-162"></a><span>  </span><span class="hs-identifier hs-var">execute</span><span class="hs-special">,</span><span>
</span><a name="line-163"></a><span>  </span><span class="hs-identifier hs-var">executeNoFetch</span><span class="hs-special">,</span><span>
</span><a name="line-164"></a><span>
</span><a name="line-165"></a><span>  </span><span class="hs-comment">-- ** Select</span><span>
</span><a name="line-166"></a><span>  </span><span class="hs-comment">-- $select</span><span>
</span><a name="line-167"></a><span>  </span><span class="hs-identifier hs-var">prepareQuery</span><span class="hs-special">,</span><span>
</span><a name="line-168"></a><span>  </span><span class="hs-identifier hs-var">fetch</span><span class="hs-special">,</span><span>
</span><a name="line-169"></a><span>  </span><span class="hs-identifier hs-var">runQuery</span><span class="hs-special">,</span><span>
</span><a name="line-170"></a><span>  </span><span class="hs-identifier hs-var">runQuery'</span><span class="hs-special">,</span><span>
</span><a name="line-171"></a><span>
</span><a name="line-172"></a><span>  </span><span class="hs-comment">-- ** Insert Values</span><span>
</span><a name="line-173"></a><span>  </span><span class="hs-comment">-- $insertValue</span><span>
</span><a name="line-174"></a><span>  </span><span class="hs-identifier hs-var">prepareInsert</span><span class="hs-special">,</span><span>
</span><a name="line-175"></a><span>  </span><span class="hs-identifier hs-var">runInsert</span><span class="hs-special">,</span><span>
</span><a name="line-176"></a><span>
</span><a name="line-177"></a><span>  </span><span class="hs-comment">-- ** Insert Select Results</span><span>
</span><a name="line-178"></a><span>  </span><span class="hs-comment">-- $insertSelect</span><span>
</span><a name="line-179"></a><span>  </span><span class="hs-identifier hs-var">prepareInsertQuery</span><span class="hs-special">,</span><span>
</span><a name="line-180"></a><span>  </span><span class="hs-identifier hs-var">runInsertQuery</span><span class="hs-special">,</span><span>
</span><a name="line-181"></a><span>
</span><a name="line-182"></a><span>  </span><span class="hs-comment">-- ** Update</span><span>
</span><a name="line-183"></a><span>  </span><span class="hs-comment">-- $update</span><span>
</span><a name="line-184"></a><span>  </span><span class="hs-identifier hs-var">prepareUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-185"></a><span>  </span><span class="hs-identifier hs-var">runUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-186"></a><span>
</span><a name="line-187"></a><span>  </span><span class="hs-comment">-- ** Delete</span><span>
</span><a name="line-188"></a><span>  </span><span class="hs-comment">-- $delete</span><span>
</span><a name="line-189"></a><span>  </span><span class="hs-identifier hs-var">prepareDelete</span><span class="hs-special">,</span><span>
</span><a name="line-190"></a><span>  </span><span class="hs-identifier hs-var">runDelete</span><span class="hs-special">,</span><span>
</span><a name="line-191"></a><span>
</span><a name="line-192"></a><span>  </span><span class="hs-comment">-- ** Update by Key</span><span>
</span><a name="line-193"></a><span>  </span><span class="hs-comment">-- $keyUpdate</span><span>
</span><a name="line-194"></a><span>  </span><span class="hs-identifier hs-var">prepareKeyUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-195"></a><span>  </span><span class="hs-identifier hs-var">bindKeyUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-196"></a><span>  </span><span class="hs-identifier hs-var">runKeyUpdate</span><span class="hs-special">,</span><span>
</span><a name="line-197"></a><span>
</span><a name="line-198"></a><span>  </span><span class="hs-special">)</span><span> </span><span class="hs-keyword">where</span><span>
</span><a name="line-199"></a><span>
</span><a name="line-200"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">Relational</span><span class="hs-operator">.</span><span class="hs-identifier">Query</span><span>
</span><a name="line-201"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">Record</span><span> </span><span class="hs-special">(</span><span class="hs-identifier hs-type">RecordFromSql</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">FromSql</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">RecordToSql</span><span class="hs-special">,</span><span> </span><span class="hs-identifier hs-type">ToSql</span><span class="hs-special">)</span><span>
</span><a name="line-202"></a><span class="hs-keyword">import</span><span> </span><span class="hs-identifier">Database</span><span class="hs-operator">.</span><span class="hs-identifier">HDBC</span><span class="hs-operator">.</span><span class="hs-identifier">Record</span><span>
</span><a name="line-203"></a><span>
</span><a name="line-204"></a><span class="hs-comment">{- $concepts
User interface of Relational Record has main two part of modules.

[@&quot;Database.Relational.Query&quot;@] Relational Query Building DSL

[@&quot;Database.Record&quot; and &quot;Database.HDBC.Record&quot;@] Database Operation Actions
 -}</span><span>
</span><a name="line-211"></a><span>
</span><a name="line-212"></a><span class="hs-comment">{- $queryBuildingDSL
Relational Query (&quot;Database.Relational.Query&quot;) module
defines Typed DSL to build complex SQL query.
 -}</span><span>
</span><a name="line-216"></a><span>
</span><a name="line-217"></a><span class="hs-comment">{- $monadicContext
On building query, query structures can be accumulated in monadic context.
 -}</span><span>
</span><a name="line-220"></a><span>
</span><a name="line-221"></a><span class="hs-comment">{- $monadicOperator
Some operators are defined to build query structures in monadic context.

'query' and 'queryMaybe' operators grow query product of monadic context like join operation of SQL.
'on' operator appends a new condition into recent join product condition.

'groupBy' operator aggregates flat projection value, and can be used only in 'MonadAggregate' context.

'wheres' and 'having' operators appends a new condition into whole query condition.
'having' only accepts aggregated projection value, and can be used only in 'MonadRestrict' 'Aggregated' context.

'distinct' operator and 'all'' operator specify SELECT DISTINCT or SELECT ALL, the last specified in monad is used.

'&lt;-#' operator assigns update target column and projection value to build update statement structure.
 -}</span><span>
</span><a name="line-236"></a><span>
</span><a name="line-237"></a><span class="hs-comment">{- $directJoin
Not monadic style join is supported by some direct join operators.

'inner', 'left', 'right', 'full' operators can construct join products directly like SQL.
'inner' operator is INNER JOIN of SQL, 'left' operator is LEFT OUTER JOIN of SQL, and so on.
'on'' operator specifies condition of join product.
'JoinRestriction' is the type of lambda form which expresses condition of join product.
 -}</span><span>
</span><a name="line-245"></a><span>
</span><a name="line-246"></a><span class="hs-comment">{- $finalize
Several operators are defined to make 'Relation' type with finalizing query monadic context.

'relation' operator finalizes flat (not aggregated) query monadic context,
and 'aggregateRelation' operator finalizes aggregated query monadic context.
Both operator convert monadic context into 'Relation' type,
and finalized 'Relation' can be reused as joining and sub-querying in another queries.

'updateTarget' operator finalize monadic context into 'UpdateTarget' type
which can be used as update statement.

'restriction' operator finalize monadic context into 'Restriction' type
which can be used as delete statement.
 -}</span><span>
</span><a name="line-260"></a><span>
</span><a name="line-261"></a><span class="hs-comment">{- $projection
SQL expression can be projected to Haskell phantom type in this DSL.
 -}</span><span>
</span><a name="line-264"></a><span>
</span><a name="line-265"></a><span class="hs-comment">{- $projectionType
'Projection' /c/ /t/ is SQL value type projection to Haskell type with context type /c/ correspond Haskell type /t/.

'Flat' is not aggregated query context type,
'Aggregated' is aggregated query context type,
'OverWindow' is window function context type, and so on.

Module &quot;Database.Relational.Query.Context&quot; contains documentation of other context types.
 -}</span><span>
</span><a name="line-274"></a><span>
</span><a name="line-275"></a><span class="hs-comment">{- $projectionPath
'!' operator is projected value selector using projection path type 'Pi' /r0/ /r1/.
'Pi' /r0/ /r1/ is projection path type selecting column type /r1/ from record type /r0/.
'&lt;.&gt;' operator makes composed projection path from two projection paths.
 -}</span><span>
</span><a name="line-280"></a><span>
</span><a name="line-281"></a><span class="hs-comment">{- $projectionOperators
Some operators are defined to calculate projected values.

For example,
'value' operator projects from Haskell value into 'Projection' corresponding SQL row value,
which projection is implicitly specified by 'ShowConstantTermsSQL' class.
Generic programming with default signature is available to define instances of 'ShowConstantTermsSQL'.

'values' operator projects from Haskell list value into 'ListProjection', corresponding SQL set value,
'.=.' operator is equal compare operation of projected value correspond to SQL =,
'.+.' operator is plus operation of projected value correspond to SQL +, and so on.

Module &quot;Database.Relational.Query.Projectable&quot; contains documentation of other projection operators.
 -}</span><span>
</span><a name="line-295"></a><span>
</span><a name="line-296"></a><span class="hs-comment">{- $aggregateFunctions
Typed aggregate function operators are defined.
Aggregated value types is distinguished with Flat value types.

For example,
'sum'' operator is aggregate function of projected flat (not aggregated) value
correspond to SQL SUM(...),
'rank' operator is window function of projected value correspond to SQL RANK(), and so on.

To convert window function result into normal projection, use the 'over' operator with built 'Window' monad.

Module &quot;Database.Relational.Query.Projectable&quot; contains documentation of
other aggregate function operators and window function operators.
 -}</span><span>
</span><a name="line-310"></a><span>
</span><a name="line-311"></a><span class="hs-comment">{- $setOperators
Several operators are defined to manipulate relation set.

'union' operator makes union relation set of two relation set correspond to SQL UNION.
'except' operator makes difference relation set of two relation set correspond to SQL EXCEPT.
'intersect' operator makes intersection relation set of two relation set correspond to SQL INTERSECT.
-}</span><span>
</span><a name="line-318"></a><span>
</span><a name="line-319"></a><span class="hs-comment">{- $maybeProjection
Some operators are provided to manage projections with 'Maybe' phantom type.

'just' operator creates 'Maybe' typed projection,
'flattenMaybe' operator joins nested 'Maybe' typed projection.

'Maybe' type flavor of operators against projection path, projection and aggregation are also provided.

For example,
'?!' operator is maybe flavor of '!',
'&lt;?.&gt;' operator is maybe flavor of '&lt;.&gt;'.
'?!?' operator and '&lt;?.?&gt;' operator 'join' two 'Maybe' phantom functors.

'?+?' operator is maybe flavor of '.+.',
'negateMaybe' operator is maybe flavor of 'negate'',
'sumMaybe' operator is maybe flavor of 'sum''.

Module &quot;Database.Relational.Query.Projectable&quot; and &quot;Database.Relational.Query.ProjectableExtended&quot;
contain documentation of other 'Maybe' flavor projection operators.
 -}</span><span>
</span><a name="line-339"></a><span>
</span><a name="line-340"></a><span class="hs-comment">{- $placeholders
'placeholders' operator takes
a lambda-form which argument is 'Projection' typed placeholders and its scope is restricted by that lambda-form
and then creates dummy value with 'Placeholders' typed which propagate placeholder type information into 'Relation' layer.

Placeholders' flavor of operators against query operation and set operation are also provided, to realize type safe placeholders.

'query'', 'left'', 'relation'', 'updateTarget'', 'restriction'', and 'union''
operator are placeholders' flavor 'query', 'left', 'relation', 'updateTarget', 'restriction' and 'union'.

Module &quot;Database.Relational.Query.Relation&quot; and &quot;Database.Relational.Query.Effect&quot;
contains documentation of other placeholders' flavor operators.
-}</span><span>
</span><a name="line-353"></a><span>
</span><a name="line-354"></a><span class="hs-comment">{- $recordMapping
Applicative style record mapping is supported, for 'Projection', 'Pi' and 'PlaceHolders'.
'|$|' operator can be used on 'ProjectableFunctor' context, and
'|*|' operator can be used on 'ProjectableApplicative' context with 'ProductConstructor',
like /Foo |$| projection1 |*| projection2 |*| projection3/
, /Foo |$| placeholders1 |*| placeholders2 |*| placeholders3/, and so on.

'&gt;&lt;' operator constructs pair result. /x &gt;&lt; y/ is the same as /(,) |$| x |*| y/.
 -}</span><span>
</span><a name="line-363"></a><span>
</span><a name="line-364"></a><span class="hs-comment">{- $databaseStatements
Some functions are defined to expand query structure
into flat SQL statements to be used by database operation.

'relationalQuery' function converts 'Relation' type info flat SQL query like SELECT statement.

'typedInsert' function converts 'Pi' key type info flat SQL INSERT statement.

'typedInsertQuery' function converts 'Pi' key type and 'Relation' type info flat SQL INSERT ... SELECT ... statement.

'typedUpdate' function converts 'UpdateTarget' type into flat SQL UPDATE statement.

'typedDelete' function converts 'Restriction' into flat SQL DELETE statement.

'typedKeyUpdate' function converts 'Pi' key type info flat SQL UPDATE statement.

Some handy table type inferred functions are provided,
'derivedInsert', 'derivedInsertQuery', 'derivedUpdate' and 'derivedDelete'.
 -}</span><span>
</span><a name="line-383"></a><span>
</span><a name="line-384"></a><span>
</span><a name="line-385"></a><span class="hs-comment">{- $databaseOperations
Some HDBC actions are defined for database side effects.
 -}</span><span>
</span><a name="line-388"></a><span>
</span><a name="line-389"></a><span class="hs-comment">{- $conversionInterfaces
Some record conversion interfaces are defined to communicate with database.

The conversions are implicitly specified by 'FromSql' class and 'ToSql' class.
Generic programming with default signature is available to define instances of 'FromSql' and 'ToSql'.

The explicit definitions correnponsing those classes are 'RecordFromSql' and 'RecordToSql'.

-}</span><span>
</span><a name="line-398"></a><span>
</span><a name="line-399"></a><span class="hs-comment">{- $generalizedStmt
Actions to manage generalized SQL statements.
 -}</span><span>
</span><a name="line-402"></a><span>
</span><a name="line-403"></a><span class="hs-comment">{- $select
Actions to manage SELECT statements.

'runQuery' function is lazy-read and 'runQuery'' function is strict version,
please use carefully.
 -}</span><span>
</span><a name="line-409"></a><span>
</span><a name="line-410"></a><span class="hs-comment">{- $insertValue
Actions to manage INSERT ... VALUES ... statements.
 -}</span><span>
</span><a name="line-413"></a><span>
</span><a name="line-414"></a><span class="hs-comment">{- $insertSelect
Actions to manage INSERT ... SELECT ... statements.
 -}</span><span>
</span><a name="line-417"></a><span>
</span><a name="line-418"></a><span class="hs-comment">{- $update
Actions to manage UPDATE statements.
 -}</span><span>
</span><a name="line-421"></a><span>
</span><a name="line-422"></a><span class="hs-comment">{- $delete
Actions to manage DELETE statements.
 -}</span><span>
</span><a name="line-425"></a><span>
</span><a name="line-426"></a><span class="hs-comment">{- $keyUpdate
Actions to manage UPDATE statements which updates columns other than specified key of the records selected by specified key.
 -}</span><span>
</span><a name="line-429"></a></pre></body></html>